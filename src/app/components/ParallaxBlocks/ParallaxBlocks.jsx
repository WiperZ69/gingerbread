'use client'
import { motion, useScroll, useTransform } from 'framer-motion'
import { useRef } from 'react'
import styles from './ParallaxBlocks.module.css'

export default function ParallaxBlocks() {
	const ref = useRef(null)
	const { scrollYProgress } = useScroll({
		target: ref,
		offset: ['start end', 'end start'],
	})

	const getAnim = () => {
		const h = useTransform(scrollYProgress, [0, 1], ['370px', '333px']) // 90%
		return { h }
	}

	const blocks = [
		{
			title: 'Пряники с вашим логотипом',
			text: 'вкусный и запоминающийся корпоративный подарок. Индивидуальный дизайн, быстрая подготовка макета и образцов, производство от 2 дней. Сертифицировано по ГОСТ, удобная оплата. Удивите партнёров и клиентов ароматным презентом!',
			img: '/block1.png',
		},
		{
			title: 'Пряники на Новый год 2026',
			text: 'свежая коллекция с человечками, венками, пряничными домиками и наборами с символом года — красной огненной лошадью. Натуральные, мягкие и ароматные пряники мы печём только под заказ, упаковываем индивидуально и доставляем по всей России. Цена от 60 рублей, корпоративные заказы с логотипом — от 30 штук.',
			img: '/block2.png',
		},
		{
			title: 'Пряники на День святого Валентина',
			text: 'это оригинальный и вкусный подарок для любимого человека 14 февраля. Имбирные сердечки и валентинки, расписанные вручную, станут ярким и запоминающимся сюрпризом. Мы печём пряники по старинным рецептам, упаковываем с заботой и доставляем по Санкт-Петербургу, Москве и всей России. Все изделия сертифицированы, всегда свежие, ароматные и сделаны с любовью.',
			img: '/block3.png',
		},
		{
			title: 'Пряники на 23 февраля',
			text: 'оригинальный и вкусный подарок для мужей, коллег и друзей. Наборы от 350 рублей и пряники поштучно от 100 рублей порадуют и взрослых, и детей. Ароматные, красивые и свежие пряники станут отличной альтернативой банальным подаркам. Заказывайте с доставкой и удобной оплатой!',
			img: '/block4.png',
		},
		{
			title: 'Пряники на 8 Марта',
			text: 'это оригинальный и изысканный подарок для мамы, супруги, коллег и подруг. В нашей коллекции вы найдёте наборы и отдельные пряники в виде цифры «8», букетов ромашек и тюльпанов, а также пряники-раскраски и пряничные букеты. Цена – от 100 до 990 рублей. Все изделия расписаны вручную, ароматные, вкусные и сделаны только из натуральных ингредиентов, имеют сертификат качества.',
			img: '/block5.png',
		},
	]

	return (
		<section ref={ref} className={styles.wrapper}>
			{blocks.map((block, i) => {
				const { h } = getAnim(i * 2)
				return (
					<motion.div
						key={i}
						className={styles.block}
						style={{ height: h, zIndex: i + 1 }}
					>
						<div className={styles.content}>
							<div className={styles.text}>
								<h2>{block.title}</h2>
								<p>{block.text}</p>
							</div>
							<div className={styles.image}>
								<img src={block.img} alt={block.title} />
							</div>
						</div>
					</motion.div>
				)
			})}
		</section>
	)
}
